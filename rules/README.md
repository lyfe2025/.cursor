# .cursor 项目规则配置

> **为新项目提供标准化的 Cursor IDE 开发规则和最佳实践**

## 📖 项目简介

这是一个专为 Cursor IDE 设计的项目规则配置仓库，包含了经过实践验证的开发规范、协作准则和智能规则管理机制。当你在新项目中集成这些规则后，Cursor 将自动应用这些最佳实践来指导开发工作。

## 🎯 核心价值

- **标准化开发流程**：统一的代码质量标准和项目结构规范
- **智能规则管理**：自动识别技术栈并生成对应的专用规则文件  
- **预防性质量控制**：500行文件限制等强制性规则确保代码可维护性
- **问题驱动改进**：重复问题自动转化为规则文件，持续优化开发体验
- **多技术栈适配**：支持自动识别项目技术栈并应用相应的最佳实践

## 🚀 一键安装

```bash
# 进入你的项目根目录，然后执行一键安装命令：
cd your-new-project

# 推荐方法
bash <(curl -s https://raw.githubusercontent.com/lyfe2025/.cursor/main/rules/setup-rules.sh)

# 备选方法
curl -fsSL https://raw.githubusercontent.com/lyfe2025/.cursor/main/rules/setup-rules.sh | bash
```

**🚀 一键脚本功能：**
- ✅ **自动检查并安装Git环境**（如果未安装）
- ✅ **自动初始化Git仓库**（如果当前目录不是Git项目）
- ✅ **自动克隆.cursor规则配置项目**
- ✅ **移除.cursor版本控制**（转交给你的项目管理）
- ✅ **创建标准项目目录结构**（logs/、scripts/、docs/、backups/）
- ✅ **生成交互式脚本管理入口**（`scripts.sh`）
- ✅ **自动检测技术栈**（React、Node.js、Python等）
- ✅ **更新.gitignore配置**

**🎯 真正的一键安装，无需任何前置条件！**

**安装完成后重启 Cursor IDE 即可享受智能化开发体验！**

## 📁 规则文件结构

```
.cursor/
└── rules/
    ├── setup-rules.sh          # 一键安装脚本 🔥
    ├── userrules.mdc           # 通用协作准则 (核心文件)
    ├── rule-file-management.mdc # 规则文件管理策略
    └── README.md               # 详细使用说明 (本文件)
```

### 核心规则文件说明

#### 📋 `userrules.mdc` - 通用协作准则
**主要功能：**
- ✅ 500行文件强制限制（不可违背的铁律）
- ✅ 智能技术栈识别和规则生成
- ✅ 代码质量要求和安全规范
- ✅ 项目结构标准化（logs/, scripts/, docs/, backups/）
- ✅ 协作交互规范和决策边界

**自动执行机制：**
- 项目启动时自动识别技术栈（React、Next.js、Node.js 等）
- 生成对应技术栈专用规则文件（如：`react-v18-standards.mdc`）
- 建立标准项目目录结构
- 超过500行文件时强制分离执行

#### 🔧 `rule-file-management.mdc` - 规则管理策略
**专用功能：**
- 📊 智能规则文件生成触发机制
- 🎯 问题分类和规则文件类型映射
- 🔄 规则文件修改和维护策略
- 📈 新项目规则继承和适配策略

## 🛠️ 技术栈支持

### 自动识别的技术栈
- **前端框架**：React, Vue, Angular, Next.js, Nuxt.js
- **后端技术**：Node.js, Python, Java, Go, PHP
- **数据库**：MySQL, PostgreSQL, MongoDB, Redis
- **移动开发**：React Native, Flutter
- **其他**：TypeScript, Docker, Kubernetes

### 自动生成的专用规则文件示例
```
react-v18-standards.mdc      # React 18 开发规范
nodejs-v20-guidelines.mdc    # Node.js 20 最佳实践
nextjs-v14-best-practices.mdc # Next.js 14 项目规范
security-web-requirements.mdc # Web 安全要求
```

## ⚡ 智能特性

### 1. 自动规则文件生成
- **技术栈检测**：根据 package.json、requirements.txt 等自动识别
- **官方文档整合**：搜索并整合对应技术栈的官方最佳实践
- **问题驱动**：同一问题出现2次以上自动生成预防规则

### 2. 强制质量控制
- **500行红线**：任何文件超过500行立即强制分离
- **预防性检查**：300行预警，450行强制分离准备
- **模块化设计**：自动提示和执行代码分离策略

### 3. 项目结构标准化
自动创建和维护标准目录结构：
```
your-project/
├── logs/           # 项目日志统一存放
├── scripts/        # 项目脚本分类存放  
├── scripts.sh      # 交互式脚本入口
├── backups/        # 项目备份统一存放
├── docs/           # 项目文档分类存放
│   ├── 架构文档/
│   ├── 开发指南/
│   ├── 部署运维/
│   ├── API文档/
│   ├── 用户手册/
│   ├── 项目管理/
│   ├── 问题解决/
│   └── 团队协作/
└── .cursor/        # Cursor 规则配置
```

## 🔥 核心规则亮点

### 💥 500行文件铁律
```
⚠️  绝对不可违背的核心规则：
• 任何源代码文件严格禁止超过500行
• 300行预警，450行强制分离，500行红线
• 代码写入前强制检查，超限拒绝写入
• 大功能必须分解为多个小文件实现
```

### 🎯 技术栈智能适配
```
✅ 自动化流程：
1. 识别项目技术栈和精确版本号
2. 搜索官方文档和最佳实践
3. 生成权威的技术栈专用规则文件
4. 应用框架特定的开发规范
```

### 📊 问题驱动改进
```
🔄 持续优化机制：
• 重复问题 → 自动生成规则文件
• 技术升级 → 自动更新规则内容  
• 安全漏洞 → 立即生成安全规则
• 经验积累 → 转化为可复用知识
```

## 🎨 使用效果展示

### 代码质量提升
- ✅ 文件保持适中规模，便于理解和维护
- ✅ 统一的代码风格和命名规范
- ✅ 完善的错误处理和安全防护
- ✅ 清晰的项目结构和文档组织

### 开发效率提升  
- ⚡ 技术栈最佳实践自动应用
- ⚡ 重复问题解决方案自动化
- ⚡ 标准化的脚本和工具集成
- ⚡ 智能决策边界减少沟通成本

### 团队协作改善
- 🤝 统一的开发规范和流程
- 🤝 标准化的文档结构和分类
- 🤝 清晰的代码审查标准
- 🤝 可复用的项目经验积累

## 🛠️ 安装脚本详细说明

### `setup-rules.sh` 脚本功能

我们提供了一个智能安装脚本，可以自动化完成所有配置工作：

```bash
bash .cursor/rules/setup-rules.sh
```

#### 🔍 脚本执行流程

1. **环境检查阶段**
   - 检查当前目录是否为Git仓库根目录
   - 获取并显示当前项目信息（分支、远程、提交历史）
   - 验证是否为.cursor项目本身（防止误操作）
   - 确认.cursor目录和规则文件完整性

2. **版本控制处理**
   - 自动移除`.cursor/.git`目录
   - 将.cursor配置的版本控制权转交给你的项目
   - 更新`.gitignore`配置（默认提交.cursor到版本控制）

3. **项目结构标准化**
   - 创建标准目录：`logs/`、`scripts/`、`backups/`、`docs/`
   - 为每个目录生成规范的README.md说明文件
   - 按功能分类创建子目录（部署、工具、文档分类等）

4. **脚本管理系统**
   - 生成`scripts.sh`交互式脚本入口
   - 支持命令行参数和交互式菜单两种使用方式
   - 集成部署、工具、数据库、备份等常用脚本分类

5. **技术栈智能识别**
   - 自动检测项目技术栈（React、Vue、Node.js、Python等）
   - 为后续Cursor AI生成专用规则文件提供信息
   - 支持多技术栈项目的识别

#### 🎯 安装后的项目结构

```
your-project/
├── .cursor/                    # Cursor 规则配置（无.git）
│   └── rules/
│       ├── setup-rules.sh      # 一键安装脚本
│       ├── userrules.mdc       # 通用协作准则
│       ├── rule-file-management.mdc # 规则管理策略
│       └── README.md           # 使用说明
├── logs/                       # 项目日志目录
├── scripts/                    # 脚本分类目录
│   ├── deployment/             # 部署脚本
│   ├── tools/                  # 工具脚本
│   └── database/               # 数据库脚本
├── scripts.sh                  # 交互式脚本入口
├── backups/                    # 备份目录
├── docs/                       # 文档分类目录
│   ├── 架构文档/
│   ├── 开发指南/
│   ├── 部署运维/
│   ├── API文档/
│   ├── 用户手册/
│   ├── 项目管理/
│   ├── 问题解决/
│   └── 团队协作/
└── .gitignore                  # 更新的Git忽略配置
```

## 📋 最佳实践建议

### 1. 项目启动阶段
```bash
# 一键安装（无需Git环境，脚本会自动处理）
bash <(curl -s https://raw.githubusercontent.com/lyfe2025/.cursor/main/rules/setup-rules.sh)

# 然后重启 Cursor IDE，让 AI 助手自动识别技术栈并生成专用规则
```

### 2. 脚本管理使用
```bash
# 交互式菜单（推荐新手）
./scripts.sh

# 快速系统检查
./scripts.sh check

# 查看帮助
./scripts.sh help
```

### 3. 开发过程中
- 遵循500行文件限制，及时进行代码分离
- 利用自动生成的技术栈规则文件进行开发
- 将重复遇到的问题反馈给 AI 助手生成规则文件
- 使用`scripts.sh`管理项目相关脚本和工具
- 按规范维护`docs/`目录下的项目文档

### 4. 团队协作
- 确保所有团队成员都使用相同的规则配置
- 定期更新规则文件内容，保持最佳实践的时效性
- 将项目特有的规则和经验及时补充到专用规则文件中
- 利用标准化的目录结构进行团队协作

## 🔄 更新和维护

### 规则文件更新机制
- **自动更新**：技术栈升级时自动检测并更新规则
- **手动更新**：`git pull` 获取最新的通用规则改进
- **问题驱动**：根据项目实际遇到的问题持续完善规则

### 贡献和反馈
如果你在使用过程中发现问题或有改进建议：
1. 提交 Issue 描述具体问题或建议
2. 贡献代码改进规则文件内容
3. 分享你的项目实践经验和最佳实践

## ✅ 安装验证

### 确认安装成功

安装完成后，你可以通过以下方式验证配置是否生效：

1. **检查目录结构**
   ```bash
   ls -la  # 确认看到 .cursor/, logs/, scripts/, docs/, backups/ 等目录
   ```

2. **验证脚本功能**
   ```bash
   ./scripts.sh check  # 运行系统检查
   ```

3. **重启 Cursor IDE**
   - 重新打开你的项目
   - 新建或编辑任意代码文件
   - 观察 AI 助手是否遵循新的开发规则

4. **查看规则文件**
   ```bash
   cat .cursor/rules/userrules.mdc  # 查看核心规则
   ```

### 常见问题排查

**Q: Cursor AI 没有应用新规则？**
- 确保重启了 Cursor IDE
- 检查 `.cursor/rules/` 目录下是否有 `userrules.mdc` 文件
- 尝试清除 Cursor 缓存并重启

**Q: 脚本无法执行？**  
```bash
chmod +x scripts.sh  # 确保脚本有执行权限
```

**Q: 想要自定义规则文件？**
- 可直接编辑 `.cursor/rules/userrules.mdc`
- 添加项目特定的规则到文件末尾
- Cursor AI 会自动应用修改后的规则

## 📞 支持和联系

- **项目地址**：https://github.com/lyfe2025/.cursor
- **问题反馈**：通过 GitHub Issues 提交
- **使用讨论**：欢迎在 Issues 中分享使用经验
- **安装脚本**：遇到安装问题可以查看 `setup.sh` 的详细日志输出

## 📄 许可证

本项目采用开源许可证，欢迎自由使用、修改和分发。

---

**🚀 让每个新项目都从优秀的开发规范开始！**

> 💡 **提示**：安装完成后不要忘记重启 Cursor IDE，让规则配置生效！